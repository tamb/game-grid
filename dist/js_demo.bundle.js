/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./dist/main.js":
/*!**********************!*\
  !*** ./dist/main.js ***!
  \**********************/
/***/ ((module) => {

/*! For license information please see main.js.LICENSE.txt */
!function(e,n){ true?module.exports=n():0}(self,(function(){return(()=>{"use strict";var __webpack_modules__={"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ".gamegrid * {\\n  box-sizing: border-box; }\\n\\n.gamegrid__stage {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  box-sizing: border-box;\\n  border: 1px solid; }\\n\\n.gamegrid__row {\\n  display: flex;\\n  flex-basis: 100%;\\n  max-width: 100%;\\n  box-sizing: border-box; }\\n\\n.gamegrid__cell {\\n  flex: 1 0 auto;\\n  height: auto;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n  border: 1px solid; }\\n  .gamegrid__cell--active {\\n    outline: 4px solid red; }\\n  .gamegrid__cell::before {\\n    content: \\"\\";\\n    float: left;\\n    padding-top: 100%; }\\n", ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://GamGrid/./src/styles.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet%5B1%5D.rules%5B1%5D.use%5B2%5D!./node_modules/sass-loader/dist/cjs.js')},"./node_modules/css-loader/dist/runtime/api.js":module=>{eval('\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return "@media ".concat(item[2], " {").concat(content, "}");\n      }\n\n      return content;\n    }).join("");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === "string") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, ""]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\n//# sourceURL=webpack://GamGrid/./node_modules/css-loader/dist/runtime/api.js?')},"./src/styles.scss":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../node_modules/sass-loader/dist/cjs.js!./styles.scss */ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss");\n\n            \n\nvar options = {};\n\noptions.insert = "head";\noptions.singleton = false;\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_1__.default, options);\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});\n\n//# sourceURL=webpack://GamGrid/./src/styles.scss?')},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : 0;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack://GamGrid/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?")},"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles.scss */ "./src/styles.scss");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums */ "./src/enums.js");\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\n\r\n\r\n\r\nvar INITIAL_STATE = {\r\n    active_coords: [0, 0],\r\n    prev_coords: [0, 0],\r\n    current_direction: "",\r\n    rendered: false,\r\n    moves: [[0, 0]],\r\n};\r\nvar DIRECTIONS = {\r\n    UP: "up",\r\n    DOWN: "down",\r\n    LEFT: "left",\r\n    RIGHT: "right",\r\n};\r\nvar HtmlGameGrid = /** @class */ (function () {\r\n    function HtmlGameGrid(query, config) {\r\n        this.options = __assign({ \r\n            // active_class: "gamegrid-active",\r\n            arrow_controls: true, wasd_controls: true, \r\n            // container_class: "",\r\n            infinite_x: true, infinite_y: true, clickable: true, rewind_limit: 20 }, config.options);\r\n        this.refs = {\r\n            container: document.querySelector(query),\r\n            rows: [],\r\n            cells: [],\r\n        };\r\n        this.matrix = config.matrix;\r\n        this.state = __assign(__assign({}, INITIAL_STATE), config.state);\r\n        this.containerFocus = this.containerFocus.bind(this);\r\n        this.containerBlur = this.containerBlur.bind(this);\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n        this.handleCellClick = this.handleCellClick.bind(this);\r\n        this.init();\r\n    }\r\n    // API\r\n    HtmlGameGrid.prototype.getOptions = function () {\r\n        return this.options;\r\n    };\r\n    HtmlGameGrid.prototype.setOptions = function (newOptions) {\r\n        this.options = __assign(__assign({}, this.options), newOptions);\r\n    };\r\n    HtmlGameGrid.prototype.getRefs = function () {\r\n        return this.refs;\r\n    };\r\n    HtmlGameGrid.prototype.destroy = function () {\r\n        this.state.rendered ? this.dettachHandlers() : null;\r\n        this.refs = __assign(__assign({}, this.refs), { rows: [], cells: [] });\r\n    };\r\n    HtmlGameGrid.prototype.getState = function () {\r\n        return this.state;\r\n    };\r\n    HtmlGameGrid.prototype.moveLeft = function () {\r\n        this.setStateSync({\r\n            next_coords: [\r\n                this.state.active_coords[0],\r\n                this.state.active_coords[1] - 1,\r\n            ],\r\n            current_direction: DIRECTIONS.LEFT,\r\n        });\r\n        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_LEFT);\r\n        this.finishMove();\r\n    };\r\n    HtmlGameGrid.prototype.moveUp = function () {\r\n        this.setStateSync({\r\n            next_coords: [\r\n                this.state.active_coords[0] - 1,\r\n                this.state.active_coords[1],\r\n            ],\r\n            current_direction: DIRECTIONS.UP,\r\n        });\r\n        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_UP);\r\n        this.finishMove();\r\n    };\r\n    HtmlGameGrid.prototype.moveRight = function () {\r\n        this.setStateSync({\r\n            next_coords: [\r\n                this.state.active_coords[0],\r\n                this.state.active_coords[1] + 1,\r\n            ],\r\n            current_direction: DIRECTIONS.RIGHT,\r\n        });\r\n        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_RIGHT);\r\n        this.finishMove();\r\n    };\r\n    HtmlGameGrid.prototype.moveDown = function () {\r\n        this.setStateSync({\r\n            next_coords: [\r\n                this.state.active_coords[0] + 1,\r\n                this.state.active_coords[1],\r\n            ],\r\n            current_direction: DIRECTIONS.DOWN,\r\n        });\r\n        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_DOWN);\r\n        this.finishMove();\r\n    };\r\n    HtmlGameGrid.prototype.setMatrix = function (m) {\r\n        this.matrix = m;\r\n    };\r\n    HtmlGameGrid.prototype.getMatrix = function () {\r\n        return this.matrix;\r\n    };\r\n    HtmlGameGrid.prototype.setStateSync = function (obj) {\r\n        var newState = __assign(__assign({}, this.state), obj);\r\n        this.state = newState;\r\n        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.STATE_UPDATED);\r\n    };\r\n    HtmlGameGrid.prototype.render = function () {\r\n        var _this = this;\r\n        this.refs.container.classList.add("gamegrid");\r\n        this.refs.container.setAttribute("tabindex", "0");\r\n        this.refs.container.setAttribute("data-gamegrid-ref", "container");\r\n        var grid = document.createDocumentFragment();\r\n        this.matrix.forEach(function (rowData, rI) {\r\n            var row = document.createElement("div");\r\n            _this.options.row_class ? row.classList.add(_this.options.row_class) : null;\r\n            row.setAttribute("data-gamegrid-row-index", rI.toString());\r\n            row.setAttribute("data-gamegrid-ref", "row");\r\n            row.classList.add("gamegrid__row");\r\n            _this.refs.cells.push([]);\r\n            rowData.forEach(function (cellData, cI) {\r\n                var _a;\r\n                var cell = document.createElement("div");\r\n                (0,_utils__WEBPACK_IMPORTED_MODULE_1__.renderAttributes)(cell, [\r\n                    ["data-gamegrid-ref", "cell"],\r\n                    ["data-gamegrid-row-index", rI.toString()],\r\n                    ["data-gamegrid-col-index", cI.toString()],\r\n                    ["data-gamegrid-coords", rI + "," + cI],\r\n                ]);\r\n                cell.style.width = 100 / rowData.length + "%";\r\n                (_a = cellData.cellAttributes) === null || _a === void 0 ? void 0 : _a.forEach(function (attr) {\r\n                    cell.setAttribute(attr[0], attr[1]);\r\n                });\r\n                cell.classList.add("gamegrid__cell");\r\n                cell.setAttribute("tabindex", _this.options.clickable ? "0" : "-1");\r\n                if (cellData.renderFunction) {\r\n                    cell.appendChild(cellData.renderFunction());\r\n                }\r\n                row.appendChild(cell);\r\n                _this.refs.cells[rI].push(cell);\r\n            });\r\n            _this.refs.rows.push(row);\r\n            grid.appendChild(row);\r\n        });\r\n        this.refs.container.appendChild(grid);\r\n        this.setStateSync({ rendered: true });\r\n        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.RENDERED);\r\n    };\r\n    HtmlGameGrid.prototype.setFocusToCell = function (row, col) {\r\n        var _a, _b;\r\n        var cells = this.getRefs().cells;\r\n        if (typeof row === "number" && typeof col === "number") {\r\n            cells[row][col].focus();\r\n            this.removeActiveClasses();\r\n            cells[row][col].classList.add("gamegrid__cell--active");\r\n            this.setStateSync({ active_coords: [row, col] });\r\n        }\r\n        else {\r\n            (_a = this.getActiveCell()) === null || _a === void 0 ? void 0 : _a.focus();\r\n            this.removeActiveClasses();\r\n            (_b = this.getActiveCell()) === null || _b === void 0 ? void 0 : _b.classList.add("gamegrid__cell--active");\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.removeActiveClasses = function () {\r\n        this.getRefs().cells.forEach(function (cellRow) {\r\n            cellRow.forEach(function (cell) {\r\n                cell.classList.remove("gamegrid__cell--active");\r\n            });\r\n        });\r\n    };\r\n    HtmlGameGrid.prototype.setFocusToContainer = function () {\r\n        this.getRefs().container.focus();\r\n    };\r\n    HtmlGameGrid.prototype.getActiveCell = function () {\r\n        return this.getRefs().cells[this.state.active_coords[0]][this.state.active_coords[1]];\r\n    };\r\n    //INPUT\r\n    HtmlGameGrid.prototype.init = function () {\r\n        this.state.rendered ? this.attachHandlers() : null;\r\n    };\r\n    HtmlGameGrid.prototype.addToMoves = function () {\r\n        var clonedMoves = __spreadArray([], this.getState().moves);\r\n        clonedMoves.unshift(this.state.active_coords);\r\n        if (clonedMoves.length > this.options.rewind_limit) {\r\n            clonedMoves.shift();\r\n        }\r\n        this.setStateSync({ moves: clonedMoves });\r\n    };\r\n    HtmlGameGrid.prototype.testLimit = function () {\r\n        // use state direction, and state active coords\r\n        var row = this.state.next_coords[0];\r\n        var col = this.state.next_coords[1];\r\n        var rowFinalIndex = this.matrix.length - 1;\r\n        var colFinalIndex = this.matrix[this.state.active_coords[0]].length - 1; // todo: test for variable col length\r\n        switch (this.state.current_direction) {\r\n            case DIRECTIONS.DOWN:\r\n                if (this.state.next_coords[0] > rowFinalIndex) {\r\n                    if (!this.options.infinite_y) {\r\n                        row = rowFinalIndex;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT_Y);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT);\r\n                    }\r\n                    else {\r\n                        row = 0;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP_Y);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP);\r\n                    }\r\n                }\r\n                break;\r\n            case DIRECTIONS.LEFT:\r\n                if (this.state.next_coords[1] < 0) {\r\n                    if (this.options.infinite_x) {\r\n                        col = colFinalIndex;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP_X);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP);\r\n                    }\r\n                    else {\r\n                        col = 0;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT_X);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT);\r\n                    }\r\n                }\r\n                break;\r\n            case DIRECTIONS.RIGHT:\r\n                if (this.state.next_coords[1] > colFinalIndex) {\r\n                    if (!this.options.infinite_x) {\r\n                        col = colFinalIndex;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT_X);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT);\r\n                    }\r\n                    else {\r\n                        col = 0;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP_X);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP);\r\n                    }\r\n                }\r\n                break;\r\n            case DIRECTIONS.UP:\r\n                if (this.state.next_coords[0] < 0) {\r\n                    if (this.options.infinite_y) {\r\n                        row = rowFinalIndex;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP_Y);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.WRAP);\r\n                    }\r\n                    else {\r\n                        row = 0;\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT_Y);\r\n                        _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.LIMIT);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        this.setStateSync({\r\n            next_coords: [row, col],\r\n            active_coords: [row, col],\r\n            prev_coords: this.state.active_coords,\r\n        });\r\n    };\r\n    HtmlGameGrid.prototype.testInteractive = function () {\r\n        var _a;\r\n        var coords = this.state.next_coords;\r\n        if (((_a = this.matrix[coords[0]][coords[1]]) === null || _a === void 0 ? void 0 : _a.type) === "interactive") {\r\n            _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_COLLISION);\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.testBarrier = function () {\r\n        var _a;\r\n        var coords = this.state.next_coords;\r\n        if (((_a = this.matrix[coords[0]][coords[1]]) === null || _a === void 0 ? void 0 : _a.type) === "barrier") {\r\n            this.setStateSync({\r\n                active_coords: this.state.prev_coords,\r\n                prev_coords: this.state.active_coords,\r\n            });\r\n            _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_BLOCKED);\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.testSpace = function () {\r\n        var _a;\r\n        var coords = this.state.next_coords;\r\n        if (((_a = this.matrix[coords[0]][coords[1]]) === null || _a === void 0 ? void 0 : _a.type) === "open") {\r\n            if (this.matrix[this.state.prev_coords[0]][this.state.prev_coords[1]]\r\n                .type === "interactive") {\r\n                _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_DETTACH);\r\n            }\r\n            _utils__WEBPACK_IMPORTED_MODULE_1__.fireCustomEvent.call(this, _enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum.MOVE_LAND);\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.finishMove = function () {\r\n        this.testLimit();\r\n        this.testSpace();\r\n        this.testInteractive();\r\n        this.testBarrier();\r\n        this.state.rendered ? this.setFocusToCell() : null;\r\n        this.addToMoves();\r\n    };\r\n    HtmlGameGrid.prototype.handleDirection = function (event) {\r\n        switch (event.code) {\r\n            case "ArrowLeft": {\r\n                //left\r\n                this.moveLeft();\r\n                break;\r\n            }\r\n            case "KeyA": {\r\n                //left\r\n                this.moveLeft();\r\n                break;\r\n            }\r\n            case "ArrowUp": {\r\n                //up\r\n                this.moveUp();\r\n                break;\r\n            }\r\n            case "KeyW": {\r\n                //up\r\n                this.moveUp();\r\n                break;\r\n            }\r\n            case "ArrowRight": {\r\n                //right\r\n                this.moveRight();\r\n                break;\r\n            }\r\n            case "KeyD": {\r\n                //right\r\n                this.moveRight();\r\n                break;\r\n            }\r\n            case "ArrowDown": {\r\n                //down\r\n                this.moveDown();\r\n                break;\r\n            }\r\n            case "KeyS": {\r\n                //down\r\n                this.moveDown();\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.handleKeyDown = function (event) {\r\n        if (this.options.arrow_controls) {\r\n            if (event.code === "ArrowUp" ||\r\n                event.code === "ArrowRight" ||\r\n                event.code === "ArrowDown" ||\r\n                event.code === "ArrowLeft") {\r\n                event.preventDefault();\r\n                this.handleDirection(event);\r\n            }\r\n        }\r\n        if (this.options.wasd_controls) {\r\n            if (event.code === "KeyW" ||\r\n                event.code === "KeyD" ||\r\n                event.code === "KeyS" ||\r\n                event.code === "KeyA") {\r\n                event.preventDefault();\r\n                this.handleDirection(event);\r\n            }\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.handleCellClick = function (event) {\r\n        if (this.getOptions().clickable) {\r\n            if (event.target instanceof HTMLElement) {\r\n                var cellEl = event.target.closest(\'[data-gamegrid-ref="cell"]\');\r\n                if (cellEl) {\r\n                    var coords = cellEl\r\n                        .getAttribute("data-gamegrid-coords")\r\n                        .split(",")\r\n                        .map(function (n) { return Number(n); });\r\n                    this.setFocusToCell.apply(this, coords);\r\n                }\r\n                else {\r\n                    this.setFocusToCell();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    HtmlGameGrid.prototype.containerFocus = function () {\r\n        this.getRefs().container.classList.add(this.options.active_class);\r\n    };\r\n    HtmlGameGrid.prototype.containerBlur = function () {\r\n        this.getRefs().container.classList.remove(this.options.active_class);\r\n    };\r\n    // SET UP\r\n    HtmlGameGrid.prototype.attachHandlers = function () {\r\n        this.getRefs().container.addEventListener("keydown", this.handleKeyDown);\r\n        this.getRefs().container.addEventListener("focus", this.containerFocus);\r\n        this.getRefs().container.addEventListener("blur", this.containerBlur);\r\n        this.getRefs().container.addEventListener("click", this.handleCellClick);\r\n    };\r\n    HtmlGameGrid.prototype.dettachHandlers = function () {\r\n        this.getRefs().container.removeEventListener("keydown", this.handleKeyDown);\r\n        this.getRefs().container.removeEventListener("focus", this.containerFocus);\r\n        this.getRefs().container.removeEventListener("blur", this.containerBlur);\r\n        this.getRefs().container.removeEventListener("click", this.handleCellClick);\r\n    };\r\n    return HtmlGameGrid;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HtmlGameGrid);\r\n\n\n//# sourceURL=webpack://GamGrid/./src/index.ts?')},"./src/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "renderAttributes": () => (/* binding */ renderAttributes),\n/* harmony export */   "getCoordsFromElement": () => (/* binding */ getCoordsFromElement),\n/* harmony export */   "fireCustomEvent": () => (/* binding */ fireCustomEvent),\n/* harmony export */   "mapRowColIndicesToXY": () => (/* binding */ mapRowColIndicesToXY),\n/* harmony export */   "mapXYToRowColIndices": () => (/* binding */ mapXYToRowColIndices)\n/* harmony export */ });\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums */ "./src/enums.js");\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction getKeyByValue(object, value) {\r\n    return Object.keys(object).find(function (key) { return object[key] === value; });\r\n}\r\nfunction renderAttributes(el, tuples) {\r\n    tuples.forEach(function (tuple) {\r\n        el.setAttribute(tuple[0], tuple[1]);\r\n    });\r\n}\r\nfunction getCoordsFromElement(el) {\r\n    var _a;\r\n    try {\r\n        return (_a = el === null || el === void 0 ? void 0 : el.getAttribute("data-coords")) === null || _a === void 0 ? void 0 : _a.split(",").map(function (num) { return parseInt(num); });\r\n    }\r\n    catch (err) {\r\n        this.handleError(err);\r\n    }\r\n}\r\nfunction fireCustomEvent(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, {\r\n        detail: __assign(__assign({}, data), { game_grid_instance: this }),\r\n        bubbles: true,\r\n    }));\r\n    if (this.options.callbacks) {\r\n        this.options.callbacks[getKeyByValue(_enums__WEBPACK_IMPORTED_MODULE_0__.gridEventsEnum, eventName)]\r\n            ? this.options.callbacks[getKeyByValue(_enums__WEBPACK_IMPORTED_MODULE_0__.gridEventsEnum, eventName)](this)\r\n            : null;\r\n    }\r\n}\r\nfunction mapRowColIndicesToXY(rI, cI) {\r\n    return [rI, cI].reverse().map(function (num) { return ++num; });\r\n}\r\nfunction mapXYToRowColIndices(x, y) {\r\n    return [x, y].reverse().map(function (num) { return --num; });\r\n}\r\n\n\n//# sourceURL=webpack://GamGrid/./src/utils.ts?')},"./src/enums.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "gridEventsEnum": () => (/* binding */ gridEventsEnum),\n/* harmony export */   "cellTypeEnum": () => (/* binding */ cellTypeEnum)\n/* harmony export */ });\nconst gridEventsEnum = {\r\n  RENDERED: "gamegridhtml:grid:rendered",\r\n  STATE_UPDATED: "gamegridhtml:state:updated",\r\n\r\n  MOVE_LEFT: "gamegridhtml:move:left",\r\n  MOVE_RIGHT: "gamegridhtml:move:right",\r\n  MOVE_UP: "gamegridhtml:move:up",\r\n  MOVE_DOWN: "gamegridhtml:move:down",\r\n\r\n  MOVE_BLOCKED: "gamegridhmtl:move:blocked", // hits a wall\r\n  MOVE_COLLISION: "gamegridhtml:move:collide", // overlaps another entity\r\n  MOVE_DETTACH: "gamegridhtml:move:dettach", // leaves overlapping an entity\r\n  MOVE_LAND: "gamegridhtml:move:land", // move finished\r\n\r\n  LIMIT: "gamegridhtml:limit",\r\n  LIMIT_X: "gamegridhtml:limit:x",\r\n  LIMIT_Y: "gamegridhtml:limit:y",\r\n\r\n  WRAP: "gamegridhtml:wrap",\r\n  WRAP_X: "gamegridhtml:wrap:x",\r\n  WRAP_Y: "gamegridhtml:wrap:y",\r\n};\r\n\r\n/**\r\n * Taxonomy:\r\n * You get BLOCKED by Barriers\r\n * You COLLIDE with Interactive cells\r\n * You DETTACH from Interactive cells\r\n * You LAND on an open cell\r\n *\r\n */\r\n\r\nconst cellTypeEnum = {\r\n  OPEN: "open",\r\n  BARRIER: "barrier",\r\n  INTERACTIVE: "interactive",\r\n};\r\n\n\n//# sourceURL=webpack://GamGrid/./src/enums.js?')}},__webpack_module_cache__={};function __nested_webpack_require_38134__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](t,t.exports,__nested_webpack_require_38134__),t.exports}__nested_webpack_require_38134__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __nested_webpack_require_38134__.d(n,{a:n}),n},__nested_webpack_require_38134__.d=(e,n)=>{for(var t in n)__nested_webpack_require_38134__.o(n,t)&&!__nested_webpack_require_38134__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__nested_webpack_require_38134__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__nested_webpack_require_38134__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_38134__("./src/index.ts");return __webpack_exports__})()}));

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./demo/demo.scss":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./demo/demo.scss ***!
  \***************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/cssWithMappingToString.js */ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "@-webkit-keyframes glow {\n  from {\n    color: green;\n    text-decoration: underline; }\n  to {\n    color: black;\n    text-decoration: none; } }\n\n@keyframes glow {\n  from {\n    color: green;\n    text-decoration: underline; }\n  to {\n    color: black;\n    text-decoration: none; } }\n\n.GameGrid__stage {\n  max-width: 400px; }\n  .GameGrid__stage.active {\n    outline: 2px solid red; }\n\n.GameGrid__tile {\n  display: flex;\n  justify-content: center;\n  align-items: center; }\n  .GameGrid__tile.active {\n    background-color: aliceblue;\n    outline: 3px solid red; }\n  .GameGrid__tile.flipped {\n    background-color: blue; }\n\n[data-cell-type=\"barrier\"] {\n  background-color: coral; }\n\n[data-cell-type=\"interactive\"] {\n  background-color: green; }\n", "",{"version":3,"sources":["webpack://./demo/demo.scss"],"names":[],"mappings":"AAAA;EACE;IACE,YAAY;IACZ,0BAA0B,EAAA;EAE5B;IACE,YAAY;IACZ,qBAAqB,EAAA,EAAA;;AAPzB;EACE;IACE,YAAY;IACZ,0BAA0B,EAAA;EAE5B;IACE,YAAY;IACZ,qBAAqB,EAAA,EAAA;;AAKvB;EAEE,gBAAgB,EAAA;EAFjB;IAIG,sBAAsB,EAAA;;AAI1B;EACE,aAAa;EACb,uBAAuB;EACvB,mBAAmB,EAAA;EAHpB;IAMG,2BAA2B;IAC3B,sBAAsB,EAAA;EAPzB;IAWG,sBAAsB,EAAA;;AAR5B;EAaE,uBAAuB,EAAA;;AAVzB;EAaE,uBAAuB,EAAA","sourcesContent":["@keyframes glow {\r\n  from {\r\n    color: green;\r\n    text-decoration: underline;\r\n  }\r\n  to {\r\n    color: black;\r\n    text-decoration: none;\r\n  }\r\n}\r\n\r\n.GameGrid {\r\n  &__stage {\r\n    // max-height: 200px;\r\n    max-width: 400px;\r\n    &.active {\r\n      outline: 2px solid red;\r\n    }\r\n  }\r\n\r\n  &__tile {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    &.active {\r\n      background-color: aliceblue;\r\n      outline: 3px solid red;\r\n    }\r\n\r\n    &.flipped {\r\n      background-color: blue;\r\n    }\r\n  }\r\n}\r\n[data-cell-type=\"barrier\"] {\r\n  background-color: coral;\r\n}\r\n[data-cell-type=\"interactive\"] {\r\n  background-color: green;\r\n}\r\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join("");
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === "string") {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, ""]];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \************************************************************************/
/***/ ((module) => {

"use strict";


function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

module.exports = function cssWithMappingToString(item) {
  var _item = _slicedToArray(item, 4),
      content = _item[1],
      cssMapping = _item[3];

  if (typeof btoa === "function") {
    // eslint-disable-next-line no-undef
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || "").concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join("\n");
  }

  return [content].join("\n");
};

/***/ }),

/***/ "./demo/demo.scss":
/*!************************!*\
  !*** ./demo/demo.scss ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_node_modules_sass_loader_dist_cjs_js_demo_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../node_modules/sass-loader/dist/cjs.js!./demo.scss */ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./demo/demo.scss");

            

var options = {};

options.insert = "head";
options.singleton = false;

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_node_modules_sass_loader_dist_cjs_js_demo_scss__WEBPACK_IMPORTED_MODULE_1__.default, options);



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_node_modules_sass_loader_dist_cjs_js_demo_scss__WEBPACK_IMPORTED_MODULE_1__.default.locals || {});

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./src/enums.js":
/*!**********************!*\
  !*** ./src/enums.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "gridEventsEnum": () => (/* binding */ gridEventsEnum),
/* harmony export */   "cellTypeEnum": () => (/* binding */ cellTypeEnum)
/* harmony export */ });
const gridEventsEnum = {
  RENDERED: "gamegridhtml:grid:rendered",
  STATE_UPDATED: "gamegridhtml:state:updated",

  MOVE_LEFT: "gamegridhtml:move:left",
  MOVE_RIGHT: "gamegridhtml:move:right",
  MOVE_UP: "gamegridhtml:move:up",
  MOVE_DOWN: "gamegridhtml:move:down",

  MOVE_BLOCKED: "gamegridhmtl:move:blocked", // hits a wall
  MOVE_COLLISION: "gamegridhtml:move:collide", // overlaps another entity
  MOVE_DETTACH: "gamegridhtml:move:dettach", // leaves overlapping an entity
  MOVE_LAND: "gamegridhtml:move:land", // move finished

  LIMIT: "gamegridhtml:limit",
  LIMIT_X: "gamegridhtml:limit:x",
  LIMIT_Y: "gamegridhtml:limit:y",

  WRAP: "gamegridhtml:wrap",
  WRAP_X: "gamegridhtml:wrap:x",
  WRAP_Y: "gamegridhtml:wrap:y",
};

/**
 * Taxonomy:
 * You get BLOCKED by Barriers
 * You COLLIDE with Interactive cells
 * You DETTACH from Interactive cells
 * You LAND on an open cell
 *
 */

const cellTypeEnum = {
  OPEN: "open",
  BARRIER: "barrier",
  INTERACTIVE: "interactive",
};


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./demo/demo.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _demo_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./demo.scss */ "./demo/demo.scss");
/* harmony import */ var _dist_main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../dist/main */ "./dist/main.js");
/* harmony import */ var _dist_main__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_dist_main__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _src_enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../src/enums */ "./src/enums.js");





// import { gridEventsEnum, tileTypeEnum } from "../src/old/enums";
const tileTypeEnum = {
  OPEN: "open",
  INTERACTIVE: "interactive",
  BARRIER: "barrier",
};

const matrix = [
  [
    {
      type: tileTypeEnum.OPEN,
      cellAttributes: [["data-butt", "sauce"]],
      renderFunction: function () {
        return document.createElement("input");
      },
    },
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
    {
      type: tileTypeEnum.INTERACTIVE,
      cellAttributes: [["data-cell-type", "interactive"]],
    },
  ],
  [
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
    {
      type: tileTypeEnum.BARRIER,
      cellAttributes: [["data-cell-type", "barrier"]],
    },
  ],
  [
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
    {
      type: tileTypeEnum.BARRIER,
      cellAttributes: [["data-cell-type", "barrier"]],
    },
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
  ],
  [
    { type: tileTypeEnum.OPEN },
    { type: tileTypeEnum.OPEN },
    {
      type: tileTypeEnum.BARRIER,
      cellAttributes: [["data-cell-type", "barrier"]],
    },
    { type: tileTypeEnum.OPEN },
  ],
];
const $clickable = document.querySelector('[data-ref="Checkbox.clickable"]');
const $infinite_x = document.querySelector('[data-ref="Checkbox.infinite_x"]');
const $infinite_y = document.querySelector('[data-ref="Checkbox.infinite_y"]');
const $arrow_controls = document.querySelector(
  '[data-ref="Checkbox.arrow_controls"]'
);
const $wasd_controls = document.querySelector(
  '[data-ref="Checkbox.wasd_controls"]'
);

const g = new (_dist_main__WEBPACK_IMPORTED_MODULE_1___default())("#app", {
  matrix,
  options: {
    infinite_y: $infinite_y.checked,
    infinite_x: $infinite_x.checked,
    clickable: $clickable.checked,
    arrow_controls: $arrow_controls.checked,
    wasd_controls: $wasd_controls.checked,
    callbacks: {
      LIMIT: function (x) {
        console.log("callback for LIMIT", x);
      },
      WRAP_Y: function (x) {
        console.log("callback WRAP_Y", x);
      },
    },
  },
});

window.gamegrid = g;

const form = document.querySelector('[data-ref="Form.settings"]');
const checkboxes = Array.from(form.querySelectorAll('input[type="checkbox"]'));

checkboxes.forEach((cb) => {
  cb.addEventListener("change", () => {
    g.setOptions({
      infinite_y: $infinite_y.checked,
      infinite_x: $infinite_x.checked,
      clickable: $clickable.checked,
      arrow_controls: $arrow_controls.checked,
      wasd_controls: $wasd_controls.checked,
    });
    g.destroy();
    document.querySelector("#app").innerHTML = '';
    g.render();
    g.init();
  });
});

Object.keys(_src_enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum).forEach(function (key) {
  window.addEventListener(_src_enums__WEBPACK_IMPORTED_MODULE_2__.gridEventsEnum[key], function (event) {
    console.log(event.type, " ---- ", event.detail);
    document.querySelector("#event").textContent = `${event.type}
    ${document.querySelector("#event").textContent}`;
  });
});

g.render();

g.init();

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC8uL2Rpc3QvbWFpbi5qcyIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC8uL2RlbW8vZGVtby5zY3NzIiwid2VicGFjazovL2h0bWwtZ2FtZS1ncmlkLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzIiwid2VicGFjazovL2h0bWwtZ2FtZS1ncmlkLy4vZGVtby9kZW1vLnNjc3M/OTg2NiIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC8uL3NyYy9lbnVtcy5qcyIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaHRtbC1nYW1lLWdyaWQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9odG1sLWdhbWUtZ3JpZC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2h0bWwtZ2FtZS1ncmlkLy4vZGVtby9kZW1vLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0EsZUFBZSxLQUFpRCxvQkFBb0IsQ0FBNkcsQ0FBQyxrQkFBa0IsWUFB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QUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxLQUFLLDBCQUEwQjtBQUMvQixLQUFLLDBCQUEwQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUssMEJBQTBCO0FBQy9CLEtBQUssMEJBQTBCO0FBQy9CLEtBQUssMEJBQTBCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSywwQkFBMEI7QUFDL0IsS0FBSywwQkFBMEI7QUFDL0IsS0FBSywwQkFBMEI7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUssMEJBQTBCO0FBQy9CLEtBQUssMEJBQTBCO0FBQy9CO0FBQ0E7QUFDQSxLQUFLLDBCQUEwQjtBQUMvQixLQUFLLDBCQUEwQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSywwQkFBMEI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLG1EQUFZO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVELFlBQVksc0RBQWM7QUFDMUIsMEJBQTBCLHNEQUFjO0FBQ3hDO0FBQ0Esc0RBQXNEO0FBQ3RELE1BQU0sNkNBQTZDO0FBQ25ELEdBQUc7QUFDSCxDQUFDOztBQUVEOztBQUVBIiwiZmlsZSI6ImpzX2RlbW8uYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgbWFpbi5qcy5MSUNFTlNFLnR4dCAqL1xuIWZ1bmN0aW9uKGUsbil7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bigpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sbik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5HYW1HcmlkPW4oKTplLkdhbUdyaWQ9bigpfShzZWxmLChmdW5jdGlvbigpe3JldHVybigoKT0+e1widXNlIHN0cmljdFwiO3ZhciBfX3dlYnBhY2tfbW9kdWxlc19fPXtcIi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMV0udXNlWzJdIS4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3JjL3N0eWxlcy5zY3NzXCI6KG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pPT57ZXZhbCgnX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fKVxcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfZGlzdF9ydW50aW1lX2FwaV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyAqLyBcIi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX25vZGVfbW9kdWxlc19jc3NfbG9hZGVyX2Rpc3RfcnVudGltZV9hcGlfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfZGlzdF9ydW50aW1lX2FwaV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcXG4vLyBJbXBvcnRzXFxuXFxudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX25vZGVfbW9kdWxlc19jc3NfbG9hZGVyX2Rpc3RfcnVudGltZV9hcGlfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0KCkoZnVuY3Rpb24oaSl7cmV0dXJuIGlbMV19KTtcXG4vLyBNb2R1bGVcXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiLmdhbWVncmlkICoge1xcXFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9XFxcXG5cXFxcbi5nYW1lZ3JpZF9fc3RhZ2Uge1xcXFxuICBkaXNwbGF5OiBmbGV4O1xcXFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXFxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXFxcbiAgZmxleC13cmFwOiB3cmFwO1xcXFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcXFxuICBib3JkZXI6IDFweCBzb2xpZDsgfVxcXFxuXFxcXG4uZ2FtZWdyaWRfX3JvdyB7XFxcXG4gIGRpc3BsYXk6IGZsZXg7XFxcXG4gIGZsZXgtYmFzaXM6IDEwMCU7XFxcXG4gIG1heC13aWR0aDogMTAwJTtcXFxcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDsgfVxcXFxuXFxcXG4uZ2FtZWdyaWRfX2NlbGwge1xcXFxuICBmbGV4OiAxIDAgYXV0bztcXFxcbiAgaGVpZ2h0OiBhdXRvO1xcXFxuICBvdmVyZmxvdzogaGlkZGVuO1xcXFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcXFxuICBib3JkZXI6IDFweCBzb2xpZDsgfVxcXFxuICAuZ2FtZWdyaWRfX2NlbGwtLWFjdGl2ZSB7XFxcXG4gICAgb3V0bGluZTogNHB4IHNvbGlkIHJlZDsgfVxcXFxuICAuZ2FtZWdyaWRfX2NlbGw6OmJlZm9yZSB7XFxcXG4gICAgY29udGVudDogXFxcXFwiXFxcXFwiO1xcXFxuICAgIGZsb2F0OiBsZWZ0O1xcXFxuICAgIHBhZGRpbmctdG9wOiAxMDAlOyB9XFxcXG5cIiwgXCJcIl0pO1xcbi8vIEV4cG9ydHNcXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIGNvbnN0IF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fID0gKF9fX0NTU19MT0FERVJfRVhQT1JUX19fKTtcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9HYW1HcmlkLy4vc3JjL3N0eWxlcy5zY3NzPy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXQlNUIxJTVELnJ1bGVzJTVCMSU1RC51c2UlNUIyJTVEIS4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzJyl9LFwiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI6bW9kdWxlPT57ZXZhbCgnXFxuXFxuLypcXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXFxuKi9cXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xcblxcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcXG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XFxuXFxuICAgICAgaWYgKGl0ZW1bMl0pIHtcXG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xcbiAgICAgIH1cXG5cXG4gICAgICByZXR1cm4gY29udGVudDtcXG4gICAgfSkuam9pbihcIlwiKTtcXG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xcblxcblxcbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XFxuICAgIH1cXG5cXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcXG5cXG4gICAgaWYgKGRlZHVwZSkge1xcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXFxuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xcblxcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcXG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcXG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XFxuXFxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcXG4gICAgICAgIGNvbnRpbnVlO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XFxuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG5cXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XFxuICAgIH1cXG4gIH07XFxuXFxuICByZXR1cm4gbGlzdDtcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0dhbUdyaWQvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzPycpfSxcIi4vc3JjL3N0eWxlcy5zY3NzXCI6KF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyk9PntldmFsKCdfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XFxuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXFxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ub2RlX21vZHVsZXNfc3R5bGVfbG9hZGVyX2Rpc3RfcnVudGltZV9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWdfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohICEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMgKi8gXCIuL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX25vZGVfbW9kdWxlc19zdHlsZV9sb2FkZXJfZGlzdF9ydW50aW1lX2luamVjdFN0eWxlc0ludG9TdHlsZVRhZ19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9ub2RlX21vZHVsZXNfc3R5bGVfbG9hZGVyX2Rpc3RfcnVudGltZV9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWdfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ub2RlX21vZHVsZXNfY3NzX2xvYWRlcl9kaXN0X2Nqc19qc19ub2RlX21vZHVsZXNfcG9zdGNzc19sb2FkZXJfZGlzdF9janNfanNfcnVsZVNldF8xX3J1bGVzXzFfdXNlXzJfbm9kZV9tb2R1bGVzX3Nhc3NfbG9hZGVyX2Rpc3RfY2pzX2pzX3N0eWxlc19zY3NzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1sxXS51c2VbMl0hLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLnNjc3MgKi8gXCIuL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzFdLnVzZVsyXSEuL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3NyYy9zdHlsZXMuc2Nzc1wiKTtcXG5cXG4gICAgICAgICAgICBcXG5cXG52YXIgb3B0aW9ucyA9IHt9O1xcblxcbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XFxub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcXG5cXG52YXIgdXBkYXRlID0gX25vZGVfbW9kdWxlc19zdHlsZV9sb2FkZXJfZGlzdF9ydW50aW1lX2luamVjdFN0eWxlc0ludG9TdHlsZVRhZ19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQoKShfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfZGlzdF9janNfanNfbm9kZV9tb2R1bGVzX3Bvc3Rjc3NfbG9hZGVyX2Rpc3RfY2pzX2pzX3J1bGVTZXRfMV9ydWxlc18xX3VzZV8yX25vZGVfbW9kdWxlc19zYXNzX2xvYWRlcl9kaXN0X2Nqc19qc19zdHlsZXNfc2Nzc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQsIG9wdGlvbnMpO1xcblxcblxcblxcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gY29uc3QgX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18gPSAoX25vZGVfbW9kdWxlc19jc3NfbG9hZGVyX2Rpc3RfY2pzX2pzX25vZGVfbW9kdWxlc19wb3N0Y3NzX2xvYWRlcl9kaXN0X2Nqc19qc19ydWxlU2V0XzFfcnVsZXNfMV91c2VfMl9ub2RlX21vZHVsZXNfc2Fzc19sb2FkZXJfZGlzdF9janNfanNfc3R5bGVzX3Njc3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmxvY2FscyB8fCB7fSk7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vR2FtR3JpZC8uL3NyYy9zdHlsZXMuc2Nzcz8nKX0sXCIuL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiOihtb2R1bGUsX191bnVzZWRfd2VicGFja19leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pPT57ZXZhbChcIlxcblxcbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcXG4gIHZhciBtZW1vO1xcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XFxuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XFxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gbWVtbztcXG4gIH07XFxufSgpO1xcblxcbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XFxuICB2YXIgbWVtbyA9IHt9O1xcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcXG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXFxuXFxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG5cXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xcbiAgfTtcXG59KCk7XFxuXFxudmFyIHN0eWxlc0luRG9tID0gW107XFxuXFxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xcbiAgdmFyIHJlc3VsdCA9IC0xO1xcblxcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xcbiAgICAgIHJlc3VsdCA9IGk7XFxuICAgICAgYnJlYWs7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHJldHVybiByZXN1bHQ7XFxufVxcblxcbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XFxuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XFxuXFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcXG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcXG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcXG4gICAgdmFyIGlkZW50aWZpZXIgPSBcXFwiXFxcIi5jb25jYXQoaWQsIFxcXCIgXFxcIikuY29uY2F0KGNvdW50KTtcXG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XFxuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xcbiAgICB2YXIgb2JqID0ge1xcbiAgICAgIGNzczogaXRlbVsxXSxcXG4gICAgICBtZWRpYTogaXRlbVsyXSxcXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cXG4gICAgfTtcXG5cXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XFxuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcXG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxcbiAgICAgICAgcmVmZXJlbmNlczogMVxcbiAgICAgIH0pO1xcbiAgICB9XFxuXFxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XFxuICB9XFxuXFxuICByZXR1cm4gaWRlbnRpZmllcnM7XFxufVxcblxcbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XFxuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XFxuXFxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XFxuICAgIHZhciBub25jZSA9ICB0cnVlID8gX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA6IDA7XFxuXFxuICAgIGlmIChub25jZSkge1xcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcXG4gICAgfVxcbiAgfVxcblxcbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XFxuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XFxuICB9KTtcXG5cXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcXG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xcbiAgfSBlbHNlIHtcXG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xcblxcbiAgICBpZiAoIXRhcmdldCkge1xcbiAgICAgIHRocm93IG5ldyBFcnJvcihcXFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlxcXCIpO1xcbiAgICB9XFxuXFxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XFxuICB9XFxuXFxuICByZXR1cm4gc3R5bGU7XFxufVxcblxcbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXFxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xcbiAgICByZXR1cm4gZmFsc2U7XFxuICB9XFxuXFxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcXG59XFxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXFxuXFxuXFxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XFxuICB2YXIgdGV4dFN0b3JlID0gW107XFxuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcXG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXFxcbicpO1xcbiAgfTtcXG59KCk7XFxuXFxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XFxuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcXFwiQG1lZGlhIFxcXCIuY29uY2F0KG9iai5tZWRpYSwgXFxcIiB7XFxcIikuY29uY2F0KG9iai5jc3MsIFxcXCJ9XFxcIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXFxuXFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXFxuXFxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcXG4gIH0gZWxzZSB7XFxuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcXG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xcblxcbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcXG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XFxuICAgIH1cXG5cXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XFxuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcXG4gIHZhciBjc3MgPSBvYmouY3NzO1xcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XFxuXFxuICBpZiAobWVkaWEpIHtcXG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcXG4gIH0gZWxzZSB7XFxuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcXG4gIH1cXG5cXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09ICd1bmRlZmluZWQnKSB7XFxuICAgIGNzcyArPSBcXFwiXFxcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFxcXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFxcXCIgKi9cXFwiKTtcXG4gIH0gLy8gRm9yIG9sZCBJRVxcblxcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xcblxcblxcbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcXG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xcbiAgfSBlbHNlIHtcXG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcXG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcXG4gICAgfVxcblxcbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcXG4gIH1cXG59XFxuXFxudmFyIHNpbmdsZXRvbiA9IG51bGw7XFxudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xcblxcbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xcbiAgdmFyIHN0eWxlO1xcbiAgdmFyIHVwZGF0ZTtcXG4gIHZhciByZW1vdmU7XFxuXFxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcXG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XFxuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcXG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcXG4gIH0gZWxzZSB7XFxuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xcblxcbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XFxuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcXG4gICAgfTtcXG4gIH1cXG5cXG4gIHVwZGF0ZShvYmopO1xcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xcbiAgICBpZiAobmV3T2JqKSB7XFxuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG5cXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICByZW1vdmUoKTtcXG4gICAgfVxcbiAgfTtcXG59XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxcbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxcblxcbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcXG4gIH1cXG5cXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcXG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcXG5cXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XFxuICAgIH1cXG5cXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcXG5cXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcXG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xcblxcbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XFxuXFxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XFxuXFxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xcbiAgfTtcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0dhbUdyaWQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanM/XCIpfSxcIi4vc3JjL2luZGV4LnRzXCI6KF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyk9PntldmFsKCdfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XFxuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXFxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdHlsZXNfc2Nzc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zdHlsZXMuc2NzcyAqLyBcIi4vc3JjL3N0eWxlcy5zY3NzXCIpO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMgKi8gXCIuL3NyYy91dGlscy50c1wiKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VudW1zICovIFwiLi9zcmMvZW51bXMuanNcIik7XFxudmFyIF9fYXNzaWduID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcXHJcXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xcclxcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XFxyXFxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxcclxcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHJldHVybiB0O1xcclxcbiAgICB9O1xcclxcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG59O1xcclxcbnZhciBfX3NwcmVhZEFycmF5ID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XFxyXFxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxcclxcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xcclxcbiAgICByZXR1cm4gdG87XFxyXFxufTtcXHJcXG5cXHJcXG5cXHJcXG5cXHJcXG52YXIgSU5JVElBTF9TVEFURSA9IHtcXHJcXG4gICAgYWN0aXZlX2Nvb3JkczogWzAsIDBdLFxcclxcbiAgICBwcmV2X2Nvb3JkczogWzAsIDBdLFxcclxcbiAgICBjdXJyZW50X2RpcmVjdGlvbjogXCJcIixcXHJcXG4gICAgcmVuZGVyZWQ6IGZhbHNlLFxcclxcbiAgICBtb3ZlczogW1swLCAwXV0sXFxyXFxufTtcXHJcXG52YXIgRElSRUNUSU9OUyA9IHtcXHJcXG4gICAgVVA6IFwidXBcIixcXHJcXG4gICAgRE9XTjogXCJkb3duXCIsXFxyXFxuICAgIExFRlQ6IFwibGVmdFwiLFxcclxcbiAgICBSSUdIVDogXCJyaWdodFwiLFxcclxcbn07XFxyXFxudmFyIEh0bWxHYW1lR3JpZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgZnVuY3Rpb24gSHRtbEdhbWVHcmlkKHF1ZXJ5LCBjb25maWcpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IF9fYXNzaWduKHsgXFxyXFxuICAgICAgICAgICAgLy8gYWN0aXZlX2NsYXNzOiBcImdhbWVncmlkLWFjdGl2ZVwiLFxcclxcbiAgICAgICAgICAgIGFycm93X2NvbnRyb2xzOiB0cnVlLCB3YXNkX2NvbnRyb2xzOiB0cnVlLCBcXHJcXG4gICAgICAgICAgICAvLyBjb250YWluZXJfY2xhc3M6IFwiXCIsXFxyXFxuICAgICAgICAgICAgaW5maW5pdGVfeDogdHJ1ZSwgaW5maW5pdGVfeTogdHJ1ZSwgY2xpY2thYmxlOiB0cnVlLCByZXdpbmRfbGltaXQ6IDIwIH0sIGNvbmZpZy5vcHRpb25zKTtcXHJcXG4gICAgICAgIHRoaXMucmVmcyA9IHtcXHJcXG4gICAgICAgICAgICBjb250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpLFxcclxcbiAgICAgICAgICAgIHJvd3M6IFtdLFxcclxcbiAgICAgICAgICAgIGNlbGxzOiBbXSxcXHJcXG4gICAgICAgIH07XFxyXFxuICAgICAgICB0aGlzLm1hdHJpeCA9IGNvbmZpZy5tYXRyaXg7XFxyXFxuICAgICAgICB0aGlzLnN0YXRlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIElOSVRJQUxfU1RBVEUpLCBjb25maWcuc3RhdGUpO1xcclxcbiAgICAgICAgdGhpcy5jb250YWluZXJGb2N1cyA9IHRoaXMuY29udGFpbmVyRm9jdXMuYmluZCh0aGlzKTtcXHJcXG4gICAgICAgIHRoaXMuY29udGFpbmVyQmx1ciA9IHRoaXMuY29udGFpbmVyQmx1ci5iaW5kKHRoaXMpO1xcclxcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlEb3duID0gdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XFxyXFxuICAgICAgICB0aGlzLmhhbmRsZUNlbGxDbGljayA9IHRoaXMuaGFuZGxlQ2VsbENsaWNrLmJpbmQodGhpcyk7XFxyXFxuICAgICAgICB0aGlzLmluaXQoKTtcXHJcXG4gICAgfVxcclxcbiAgICAvLyBBUElcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gKG5ld09wdGlvbnMpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMpLCBuZXdPcHRpb25zKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5nZXRSZWZzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmcztcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy5zdGF0ZS5yZW5kZXJlZCA/IHRoaXMuZGV0dGFjaEhhbmRsZXJzKCkgOiBudWxsO1xcclxcbiAgICAgICAgdGhpcy5yZWZzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMucmVmcyksIHsgcm93czogW10sIGNlbGxzOiBbXSB9KTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xcclxcbiAgICB9O1xcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLm1vdmVMZWZ0ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy5zZXRTdGF0ZVN5bmMoe1xcclxcbiAgICAgICAgICAgIG5leHRfY29vcmRzOiBbXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlX2Nvb3Jkc1swXSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVfY29vcmRzWzFdIC0gMSxcXHJcXG4gICAgICAgICAgICBdLFxcclxcbiAgICAgICAgICAgIGN1cnJlbnRfZGlyZWN0aW9uOiBESVJFQ1RJT05TLkxFRlQsXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLk1PVkVfTEVGVCk7XFxyXFxuICAgICAgICB0aGlzLmZpbmlzaE1vdmUoKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5tb3ZlVXAgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGlzLnNldFN0YXRlU3luYyh7XFxyXFxuICAgICAgICAgICAgbmV4dF9jb29yZHM6IFtcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVfY29vcmRzWzBdIC0gMSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVfY29vcmRzWzFdLFxcclxcbiAgICAgICAgICAgIF0sXFxyXFxuICAgICAgICAgICAgY3VycmVudF9kaXJlY3Rpb246IERJUkVDVElPTlMuVVAsXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLk1PVkVfVVApO1xcclxcbiAgICAgICAgdGhpcy5maW5pc2hNb3ZlKCk7XFxyXFxuICAgIH07XFxyXFxuICAgIEh0bWxHYW1lR3JpZC5wcm90b3R5cGUubW92ZVJpZ2h0ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy5zZXRTdGF0ZVN5bmMoe1xcclxcbiAgICAgICAgICAgIG5leHRfY29vcmRzOiBbXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlX2Nvb3Jkc1swXSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVfY29vcmRzWzFdICsgMSxcXHJcXG4gICAgICAgICAgICBdLFxcclxcbiAgICAgICAgICAgIGN1cnJlbnRfZGlyZWN0aW9uOiBESVJFQ1RJT05TLlJJR0hULFxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgICBfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5maXJlQ3VzdG9tRXZlbnQuY2FsbCh0aGlzLCBfZW51bXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5ncmlkRXZlbnRzRW51bS5NT1ZFX1JJR0hUKTtcXHJcXG4gICAgICAgIHRoaXMuZmluaXNoTW92ZSgpO1xcclxcbiAgICB9O1xcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLm1vdmVEb3duID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy5zZXRTdGF0ZVN5bmMoe1xcclxcbiAgICAgICAgICAgIG5leHRfY29vcmRzOiBbXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlX2Nvb3Jkc1swXSArIDEsXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlX2Nvb3Jkc1sxXSxcXHJcXG4gICAgICAgICAgICBdLFxcclxcbiAgICAgICAgICAgIGN1cnJlbnRfZGlyZWN0aW9uOiBESVJFQ1RJT05TLkRPV04sXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLk1PVkVfRE9XTik7XFxyXFxuICAgICAgICB0aGlzLmZpbmlzaE1vdmUoKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5zZXRNYXRyaXggPSBmdW5jdGlvbiAobSkge1xcclxcbiAgICAgICAgdGhpcy5tYXRyaXggPSBtO1xcclxcbiAgICB9O1xcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5zZXRTdGF0ZVN5bmMgPSBmdW5jdGlvbiAob2JqKSB7XFxyXFxuICAgICAgICB2YXIgbmV3U3RhdGUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zdGF0ZSksIG9iaik7XFxyXFxuICAgICAgICB0aGlzLnN0YXRlID0gbmV3U3RhdGU7XFxyXFxuICAgICAgICBfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5maXJlQ3VzdG9tRXZlbnQuY2FsbCh0aGlzLCBfZW51bXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5ncmlkRXZlbnRzRW51bS5TVEFURV9VUERBVEVEKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xcclxcbiAgICAgICAgdGhpcy5yZWZzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZ2FtZWdyaWRcIik7XFxyXFxuICAgICAgICB0aGlzLnJlZnMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcXHJcXG4gICAgICAgIHRoaXMucmVmcy5jb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1nYW1lZ3JpZC1yZWZcIiwgXCJjb250YWluZXJcIik7XFxyXFxuICAgICAgICB2YXIgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcXHJcXG4gICAgICAgIHRoaXMubWF0cml4LmZvckVhY2goZnVuY3Rpb24gKHJvd0RhdGEsIHJJKSB7XFxyXFxuICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XFxyXFxuICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5yb3dfY2xhc3MgPyByb3cuY2xhc3NMaXN0LmFkZChfdGhpcy5vcHRpb25zLnJvd19jbGFzcykgOiBudWxsO1xcclxcbiAgICAgICAgICAgIHJvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWdhbWVncmlkLXJvdy1pbmRleFwiLCBySS50b1N0cmluZygpKTtcXHJcXG4gICAgICAgICAgICByb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1nYW1lZ3JpZC1yZWZcIiwgXCJyb3dcIik7XFxyXFxuICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoXCJnYW1lZ3JpZF9fcm93XCIpO1xcclxcbiAgICAgICAgICAgIF90aGlzLnJlZnMuY2VsbHMucHVzaChbXSk7XFxyXFxuICAgICAgICAgICAgcm93RGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChjZWxsRGF0YSwgY0kpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xcclxcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XFxyXFxuICAgICAgICAgICAgICAgICgwLF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLnJlbmRlckF0dHJpYnV0ZXMpKGNlbGwsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgIFtcImRhdGEtZ2FtZWdyaWQtcmVmXCIsIFwiY2VsbFwiXSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIFtcImRhdGEtZ2FtZWdyaWQtcm93LWluZGV4XCIsIHJJLnRvU3RyaW5nKCldLFxcclxcbiAgICAgICAgICAgICAgICAgICAgW1wiZGF0YS1nYW1lZ3JpZC1jb2wtaW5kZXhcIiwgY0kudG9TdHJpbmcoKV0sXFxyXFxuICAgICAgICAgICAgICAgICAgICBbXCJkYXRhLWdhbWVncmlkLWNvb3Jkc1wiLCBySSArIFwiLFwiICsgY0ldLFxcclxcbiAgICAgICAgICAgICAgICBdKTtcXHJcXG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS53aWR0aCA9IDEwMCAvIHJvd0RhdGEubGVuZ3RoICsgXCIlXCI7XFxyXFxuICAgICAgICAgICAgICAgIChfYSA9IGNlbGxEYXRhLmNlbGxBdHRyaWJ1dGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoYXR0clswXSwgYXR0clsxXSk7XFxyXFxuICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJnYW1lZ3JpZF9fY2VsbFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBfdGhpcy5vcHRpb25zLmNsaWNrYWJsZSA/IFwiMFwiIDogXCItMVwiKTtcXHJcXG4gICAgICAgICAgICAgICAgaWYgKGNlbGxEYXRhLnJlbmRlckZ1bmN0aW9uKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBjZWxsLmFwcGVuZENoaWxkKGNlbGxEYXRhLnJlbmRlckZ1bmN0aW9uKCkpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcXHJcXG4gICAgICAgICAgICAgICAgX3RoaXMucmVmcy5jZWxsc1tySV0ucHVzaChjZWxsKTtcXHJcXG4gICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICBfdGhpcy5yZWZzLnJvd3MucHVzaChyb3cpO1xcclxcbiAgICAgICAgICAgIGdyaWQuYXBwZW5kQ2hpbGQocm93KTtcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgICAgdGhpcy5yZWZzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChncmlkKTtcXHJcXG4gICAgICAgIHRoaXMuc2V0U3RhdGVTeW5jKHsgcmVuZGVyZWQ6IHRydWUgfSk7XFxyXFxuICAgICAgICBfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5maXJlQ3VzdG9tRXZlbnQuY2FsbCh0aGlzLCBfZW51bXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5ncmlkRXZlbnRzRW51bS5SRU5ERVJFRCk7XFxyXFxuICAgIH07XFxyXFxuICAgIEh0bWxHYW1lR3JpZC5wcm90b3R5cGUuc2V0Rm9jdXNUb0NlbGwgPSBmdW5jdGlvbiAocm93LCBjb2wpIHtcXHJcXG4gICAgICAgIHZhciBfYSwgX2I7XFxyXFxuICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLmdldFJlZnMoKS5jZWxscztcXHJcXG4gICAgICAgIGlmICh0eXBlb2Ygcm93ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBjb2wgPT09IFwibnVtYmVyXCIpIHtcXHJcXG4gICAgICAgICAgICBjZWxsc1tyb3ddW2NvbF0uZm9jdXMoKTtcXHJcXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZUNsYXNzZXMoKTtcXHJcXG4gICAgICAgICAgICBjZWxsc1tyb3ddW2NvbF0uY2xhc3NMaXN0LmFkZChcImdhbWVncmlkX19jZWxsLS1hY3RpdmVcIik7XFxyXFxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZVN5bmMoeyBhY3RpdmVfY29vcmRzOiBbcm93LCBjb2xdIH0pO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgKF9hID0gdGhpcy5nZXRBY3RpdmVDZWxsKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb2N1cygpO1xcclxcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlQ2xhc3NlcygpO1xcclxcbiAgICAgICAgICAgIChfYiA9IHRoaXMuZ2V0QWN0aXZlQ2VsbCgpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xhc3NMaXN0LmFkZChcImdhbWVncmlkX19jZWxsLS1hY3RpdmVcIik7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH07XFxyXFxuICAgIEh0bWxHYW1lR3JpZC5wcm90b3R5cGUucmVtb3ZlQWN0aXZlQ2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHRoaXMuZ2V0UmVmcygpLmNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGNlbGxSb3cpIHtcXHJcXG4gICAgICAgICAgICBjZWxsUm93LmZvckVhY2goZnVuY3Rpb24gKGNlbGwpIHtcXHJcXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwiZ2FtZWdyaWRfX2NlbGwtLWFjdGl2ZVwiKTtcXHJcXG4gICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICB9O1xcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLnNldEZvY3VzVG9Db250YWluZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGlzLmdldFJlZnMoKS5jb250YWluZXIuZm9jdXMoKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5nZXRBY3RpdmVDZWxsID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVmcygpLmNlbGxzW3RoaXMuc3RhdGUuYWN0aXZlX2Nvb3Jkc1swXV1bdGhpcy5zdGF0ZS5hY3RpdmVfY29vcmRzWzFdXTtcXHJcXG4gICAgfTtcXHJcXG4gICAgLy9JTlBVVFxcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGlzLnN0YXRlLnJlbmRlcmVkID8gdGhpcy5hdHRhY2hIYW5kbGVycygpIDogbnVsbDtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5hZGRUb01vdmVzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdmFyIGNsb25lZE1vdmVzID0gX19zcHJlYWRBcnJheShbXSwgdGhpcy5nZXRTdGF0ZSgpLm1vdmVzKTtcXHJcXG4gICAgICAgIGNsb25lZE1vdmVzLnVuc2hpZnQodGhpcy5zdGF0ZS5hY3RpdmVfY29vcmRzKTtcXHJcXG4gICAgICAgIGlmIChjbG9uZWRNb3Zlcy5sZW5ndGggPiB0aGlzLm9wdGlvbnMucmV3aW5kX2xpbWl0KSB7XFxyXFxuICAgICAgICAgICAgY2xvbmVkTW92ZXMuc2hpZnQoKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHRoaXMuc2V0U3RhdGVTeW5jKHsgbW92ZXM6IGNsb25lZE1vdmVzIH0pO1xcclxcbiAgICB9O1xcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLnRlc3RMaW1pdCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIC8vIHVzZSBzdGF0ZSBkaXJlY3Rpb24sIGFuZCBzdGF0ZSBhY3RpdmUgY29vcmRzXFxyXFxuICAgICAgICB2YXIgcm93ID0gdGhpcy5zdGF0ZS5uZXh0X2Nvb3Jkc1swXTtcXHJcXG4gICAgICAgIHZhciBjb2wgPSB0aGlzLnN0YXRlLm5leHRfY29vcmRzWzFdO1xcclxcbiAgICAgICAgdmFyIHJvd0ZpbmFsSW5kZXggPSB0aGlzLm1hdHJpeC5sZW5ndGggLSAxO1xcclxcbiAgICAgICAgdmFyIGNvbEZpbmFsSW5kZXggPSB0aGlzLm1hdHJpeFt0aGlzLnN0YXRlLmFjdGl2ZV9jb29yZHNbMF1dLmxlbmd0aCAtIDE7IC8vIHRvZG86IHRlc3QgZm9yIHZhcmlhYmxlIGNvbCBsZW5ndGhcXHJcXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5jdXJyZW50X2RpcmVjdGlvbikge1xcclxcbiAgICAgICAgICAgIGNhc2UgRElSRUNUSU9OUy5ET1dOOlxcclxcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5uZXh0X2Nvb3Jkc1swXSA+IHJvd0ZpbmFsSW5kZXgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluZmluaXRlX3kpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgPSByb3dGaW5hbEluZGV4O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLkxJTUlUX1kpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLkxJTUlUKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uV1JBUF9ZKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5maXJlQ3VzdG9tRXZlbnQuY2FsbCh0aGlzLCBfZW51bXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5ncmlkRXZlbnRzRW51bS5XUkFQKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICBjYXNlIERJUkVDVElPTlMuTEVGVDpcXHJcXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubmV4dF9jb29yZHNbMV0gPCAwKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZmluaXRlX3gpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSBjb2xGaW5hbEluZGV4O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLldSQVBfWCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uV1JBUCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSAwO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLkxJTUlUX1gpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLkxJTUlUKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICBjYXNlIERJUkVDVElPTlMuUklHSFQ6XFxyXFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm5leHRfY29vcmRzWzFdID4gY29sRmluYWxJbmRleCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5maW5pdGVfeCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbCA9IGNvbEZpbmFsSW5kZXg7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uTElNSVRfWCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uTElNSVQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sID0gMDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5maXJlQ3VzdG9tRXZlbnQuY2FsbCh0aGlzLCBfZW51bXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5ncmlkRXZlbnRzRW51bS5XUkFQX1gpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLldSQVApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcclxcbiAgICAgICAgICAgIGNhc2UgRElSRUNUSU9OUy5VUDpcXHJcXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubmV4dF9jb29yZHNbMF0gPCAwKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZmluaXRlX3kpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgPSByb3dGaW5hbEluZGV4O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLldSQVBfWSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uV1JBUCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgPSAwO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLkxJTUlUX1kpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLkxJTUlUKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHRoaXMuc2V0U3RhdGVTeW5jKHtcXHJcXG4gICAgICAgICAgICBuZXh0X2Nvb3JkczogW3JvdywgY29sXSxcXHJcXG4gICAgICAgICAgICBhY3RpdmVfY29vcmRzOiBbcm93LCBjb2xdLFxcclxcbiAgICAgICAgICAgIHByZXZfY29vcmRzOiB0aGlzLnN0YXRlLmFjdGl2ZV9jb29yZHMsXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS50ZXN0SW50ZXJhY3RpdmUgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgX2E7XFxyXFxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5zdGF0ZS5uZXh0X2Nvb3JkcztcXHJcXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5tYXRyaXhbY29vcmRzWzBdXVtjb29yZHNbMV1dKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHlwZSkgPT09IFwiaW50ZXJhY3RpdmVcIikge1xcclxcbiAgICAgICAgICAgIF91dGlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmZpcmVDdXN0b21FdmVudC5jYWxsKHRoaXMsIF9lbnVtc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLmdyaWRFdmVudHNFbnVtLk1PVkVfQ09MTElTSU9OKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS50ZXN0QmFycmllciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHZhciBfYTtcXHJcXG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLnN0YXRlLm5leHRfY29vcmRzO1xcclxcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLm1hdHJpeFtjb29yZHNbMF1dW2Nvb3Jkc1sxXV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50eXBlKSA9PT0gXCJiYXJyaWVyXCIpIHtcXHJcXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlU3luYyh7XFxyXFxuICAgICAgICAgICAgICAgIGFjdGl2ZV9jb29yZHM6IHRoaXMuc3RhdGUucHJldl9jb29yZHMsXFxyXFxuICAgICAgICAgICAgICAgIHByZXZfY29vcmRzOiB0aGlzLnN0YXRlLmFjdGl2ZV9jb29yZHMsXFxyXFxuICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uTU9WRV9CTE9DS0VEKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS50ZXN0U3BhY2UgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgX2E7XFxyXFxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5zdGF0ZS5uZXh0X2Nvb3JkcztcXHJcXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5tYXRyaXhbY29vcmRzWzBdXVtjb29yZHNbMV1dKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHlwZSkgPT09IFwib3BlblwiKSB7XFxyXFxuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4W3RoaXMuc3RhdGUucHJldl9jb29yZHNbMF1dW3RoaXMuc3RhdGUucHJldl9jb29yZHNbMV1dXFxyXFxuICAgICAgICAgICAgICAgIC50eXBlID09PSBcImludGVyYWN0aXZlXCIpIHtcXHJcXG4gICAgICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uTU9WRV9ERVRUQUNIKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgX3V0aWxzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZmlyZUN1c3RvbUV2ZW50LmNhbGwodGhpcywgX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZ3JpZEV2ZW50c0VudW0uTU9WRV9MQU5EKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5maW5pc2hNb3ZlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy50ZXN0TGltaXQoKTtcXHJcXG4gICAgICAgIHRoaXMudGVzdFNwYWNlKCk7XFxyXFxuICAgICAgICB0aGlzLnRlc3RJbnRlcmFjdGl2ZSgpO1xcclxcbiAgICAgICAgdGhpcy50ZXN0QmFycmllcigpO1xcclxcbiAgICAgICAgdGhpcy5zdGF0ZS5yZW5kZXJlZCA/IHRoaXMuc2V0Rm9jdXNUb0NlbGwoKSA6IG51bGw7XFxyXFxuICAgICAgICB0aGlzLmFkZFRvTW92ZXMoKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5oYW5kbGVEaXJlY3Rpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcXHJcXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29kZSkge1xcclxcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjoge1xcclxcbiAgICAgICAgICAgICAgICAvL2xlZnRcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGVmdCgpO1xcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgY2FzZSBcIktleUFcIjoge1xcclxcbiAgICAgICAgICAgICAgICAvL2xlZnRcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGVmdCgpO1xcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjoge1xcclxcbiAgICAgICAgICAgICAgICAvL3VwXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVVwKCk7XFxyXFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBjYXNlIFwiS2V5V1wiOiB7XFxyXFxuICAgICAgICAgICAgICAgIC8vdXBcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVXAoKTtcXHJcXG4gICAgICAgICAgICAgICAgYnJlYWs7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6IHtcXHJcXG4gICAgICAgICAgICAgICAgLy9yaWdodFxcclxcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVSaWdodCgpO1xcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgY2FzZSBcIktleURcIjoge1xcclxcbiAgICAgICAgICAgICAgICAvL3JpZ2h0XFxyXFxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0KCk7XFxyXFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6IHtcXHJcXG4gICAgICAgICAgICAgICAgLy9kb3duXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMubW92ZURvd24oKTtcXHJcXG4gICAgICAgICAgICAgICAgYnJlYWs7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIGNhc2UgXCJLZXlTXCI6IHtcXHJcXG4gICAgICAgICAgICAgICAgLy9kb3duXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMubW92ZURvd24oKTtcXHJcXG4gICAgICAgICAgICAgICAgYnJlYWs7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcbiAgICB9O1xcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcXHJcXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXJyb3dfY29udHJvbHMpIHtcXHJcXG4gICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJBcnJvd1VwXCIgfHxcXHJcXG4gICAgICAgICAgICAgICAgZXZlbnQuY29kZSA9PT0gXCJBcnJvd1JpZ2h0XCIgfHxcXHJcXG4gICAgICAgICAgICAgICAgZXZlbnQuY29kZSA9PT0gXCJBcnJvd0Rvd25cIiB8fFxcclxcbiAgICAgICAgICAgICAgICBldmVudC5jb2RlID09PSBcIkFycm93TGVmdFwiKSB7XFxyXFxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGlyZWN0aW9uKGV2ZW50KTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLndhc2RfY29udHJvbHMpIHtcXHJcXG4gICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gXCJLZXlXXCIgfHxcXHJcXG4gICAgICAgICAgICAgICAgZXZlbnQuY29kZSA9PT0gXCJLZXlEXCIgfHxcXHJcXG4gICAgICAgICAgICAgICAgZXZlbnQuY29kZSA9PT0gXCJLZXlTXCIgfHxcXHJcXG4gICAgICAgICAgICAgICAgZXZlbnQuY29kZSA9PT0gXCJLZXlBXCIpIHtcXHJcXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXJlY3Rpb24oZXZlbnQpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5oYW5kbGVDZWxsQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcXHJcXG4gICAgICAgIGlmICh0aGlzLmdldE9wdGlvbnMoKS5jbGlja2FibGUpIHtcXHJcXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIGNlbGxFbCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFxcJ1tkYXRhLWdhbWVncmlkLXJlZj1cImNlbGxcIl1cXCcpO1xcclxcbiAgICAgICAgICAgICAgICBpZiAoY2VsbEVsKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRzID0gY2VsbEVsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldEF0dHJpYnV0ZShcImRhdGEtZ2FtZWdyaWQtY29vcmRzXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKG4pIHsgcmV0dXJuIE51bWJlcihuKTsgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9DZWxsLmFwcGx5KHRoaXMsIGNvb3Jkcyk7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9DZWxsKCk7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH07XFxyXFxuICAgIEh0bWxHYW1lR3JpZC5wcm90b3R5cGUuY29udGFpbmVyRm9jdXMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGlzLmdldFJlZnMoKS5jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuYWN0aXZlX2NsYXNzKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5jb250YWluZXJCbHVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy5nZXRSZWZzKCkuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcHRpb25zLmFjdGl2ZV9jbGFzcyk7XFxyXFxuICAgIH07XFxyXFxuICAgIC8vIFNFVCBVUFxcclxcbiAgICBIdG1sR2FtZUdyaWQucHJvdG90eXBlLmF0dGFjaEhhbmRsZXJzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhpcy5nZXRSZWZzKCkuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bik7XFxyXFxuICAgICAgICB0aGlzLmdldFJlZnMoKS5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuY29udGFpbmVyRm9jdXMpO1xcclxcbiAgICAgICAgdGhpcy5nZXRSZWZzKCkuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHRoaXMuY29udGFpbmVyQmx1cik7XFxyXFxuICAgICAgICB0aGlzLmdldFJlZnMoKS5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQ2VsbENsaWNrKTtcXHJcXG4gICAgfTtcXHJcXG4gICAgSHRtbEdhbWVHcmlkLnByb3RvdHlwZS5kZXR0YWNoSGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGlzLmdldFJlZnMoKS5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVLZXlEb3duKTtcXHJcXG4gICAgICAgIHRoaXMuZ2V0UmVmcygpLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5jb250YWluZXJGb2N1cyk7XFxyXFxuICAgICAgICB0aGlzLmdldFJlZnMoKS5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5jb250YWluZXJCbHVyKTtcXHJcXG4gICAgICAgIHRoaXMuZ2V0UmVmcygpLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVDZWxsQ2xpY2spO1xcclxcbiAgICB9O1xcclxcbiAgICByZXR1cm4gSHRtbEdhbWVHcmlkO1xcclxcbn0oKSk7XFxyXFxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBjb25zdCBfX1dFQlBBQ0tfREVGQVVMVF9FWFBPUlRfXyA9IChIdG1sR2FtZUdyaWQpO1xcclxcblxcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0dhbUdyaWQvLi9zcmMvaW5kZXgudHM/Jyl9LFwiLi9zcmMvdXRpbHMudHNcIjooX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKT0+e2V2YWwoJ19fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcXG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW5kZXJBdHRyaWJ1dGVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHJlbmRlckF0dHJpYnV0ZXMpLFxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRDb29yZHNGcm9tRWxlbWVudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBnZXRDb29yZHNGcm9tRWxlbWVudCksXFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImZpcmVDdXN0b21FdmVudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmaXJlQ3VzdG9tRXZlbnQpLFxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJtYXBSb3dDb2xJbmRpY2VzVG9YWVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtYXBSb3dDb2xJbmRpY2VzVG9YWSksXFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIm1hcFhZVG9Sb3dDb2xJbmRpY2VzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG1hcFhZVG9Sb3dDb2xJbmRpY2VzKVxcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW51bXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW51bXMgKi8gXCIuL3NyYy9lbnVtcy5qc1wiKTtcXG52YXIgX19hc3NpZ24gPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xcclxcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xcclxcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XFxyXFxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcXHJcXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXFxyXFxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgcmV0dXJuIHQ7XFxyXFxuICAgIH07XFxyXFxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcbn07XFxyXFxuXFxyXFxuZnVuY3Rpb24gZ2V0S2V5QnlWYWx1ZShvYmplY3QsIHZhbHVlKSB7XFxyXFxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmplY3QpLmZpbmQoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gb2JqZWN0W2tleV0gPT09IHZhbHVlOyB9KTtcXHJcXG59XFxyXFxuZnVuY3Rpb24gcmVuZGVyQXR0cmlidXRlcyhlbCwgdHVwbGVzKSB7XFxyXFxuICAgIHR1cGxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0dXBsZSkge1xcclxcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKHR1cGxlWzBdLCB0dXBsZVsxXSk7XFxyXFxuICAgIH0pO1xcclxcbn1cXHJcXG5mdW5jdGlvbiBnZXRDb29yZHNGcm9tRWxlbWVudChlbCkge1xcclxcbiAgICB2YXIgX2E7XFxyXFxuICAgIHRyeSB7XFxyXFxuICAgICAgICByZXR1cm4gKF9hID0gZWwgPT09IG51bGwgfHwgZWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtY29vcmRzXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbiAobnVtKSB7IHJldHVybiBwYXJzZUludChudW0pOyB9KTtcXHJcXG4gICAgfVxcclxcbiAgICBjYXRjaCAoZXJyKSB7XFxyXFxuICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycik7XFxyXFxuICAgIH1cXHJcXG59XFxyXFxuZnVuY3Rpb24gZmlyZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgZGF0YSkge1xcclxcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7XFxyXFxuICAgICAgICBkZXRhaWw6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkYXRhKSwgeyBnYW1lX2dyaWRfaW5zdGFuY2U6IHRoaXMgfSksXFxyXFxuICAgICAgICBidWJibGVzOiB0cnVlLFxcclxcbiAgICB9KSk7XFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY2FsbGJhY2tzKSB7XFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMuY2FsbGJhY2tzW2dldEtleUJ5VmFsdWUoX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uZ3JpZEV2ZW50c0VudW0sIGV2ZW50TmFtZSldXFxyXFxuICAgICAgICAgICAgPyB0aGlzLm9wdGlvbnMuY2FsbGJhY2tzW2dldEtleUJ5VmFsdWUoX2VudW1zX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uZ3JpZEV2ZW50c0VudW0sIGV2ZW50TmFtZSldKHRoaXMpXFxyXFxuICAgICAgICAgICAgOiBudWxsO1xcclxcbiAgICB9XFxyXFxufVxcclxcbmZ1bmN0aW9uIG1hcFJvd0NvbEluZGljZXNUb1hZKHJJLCBjSSkge1xcclxcbiAgICByZXR1cm4gW3JJLCBjSV0ucmV2ZXJzZSgpLm1hcChmdW5jdGlvbiAobnVtKSB7IHJldHVybiArK251bTsgfSk7XFxyXFxufVxcclxcbmZ1bmN0aW9uIG1hcFhZVG9Sb3dDb2xJbmRpY2VzKHgsIHkpIHtcXHJcXG4gICAgcmV0dXJuIFt4LCB5XS5yZXZlcnNlKCkubWFwKGZ1bmN0aW9uIChudW0pIHsgcmV0dXJuIC0tbnVtOyB9KTtcXHJcXG59XFxyXFxuXFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vR2FtR3JpZC8uL3NyYy91dGlscy50cz8nKX0sXCIuL3NyYy9lbnVtcy5qc1wiOihfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pPT57ZXZhbCgnX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdyaWRFdmVudHNFbnVtXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGdyaWRFdmVudHNFbnVtKSxcXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiY2VsbFR5cGVFbnVtXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGNlbGxUeXBlRW51bSlcXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcXG5jb25zdCBncmlkRXZlbnRzRW51bSA9IHtcXHJcXG4gIFJFTkRFUkVEOiBcImdhbWVncmlkaHRtbDpncmlkOnJlbmRlcmVkXCIsXFxyXFxuICBTVEFURV9VUERBVEVEOiBcImdhbWVncmlkaHRtbDpzdGF0ZTp1cGRhdGVkXCIsXFxyXFxuXFxyXFxuICBNT1ZFX0xFRlQ6IFwiZ2FtZWdyaWRodG1sOm1vdmU6bGVmdFwiLFxcclxcbiAgTU9WRV9SSUdIVDogXCJnYW1lZ3JpZGh0bWw6bW92ZTpyaWdodFwiLFxcclxcbiAgTU9WRV9VUDogXCJnYW1lZ3JpZGh0bWw6bW92ZTp1cFwiLFxcclxcbiAgTU9WRV9ET1dOOiBcImdhbWVncmlkaHRtbDptb3ZlOmRvd25cIixcXHJcXG5cXHJcXG4gIE1PVkVfQkxPQ0tFRDogXCJnYW1lZ3JpZGhtdGw6bW92ZTpibG9ja2VkXCIsIC8vIGhpdHMgYSB3YWxsXFxyXFxuICBNT1ZFX0NPTExJU0lPTjogXCJnYW1lZ3JpZGh0bWw6bW92ZTpjb2xsaWRlXCIsIC8vIG92ZXJsYXBzIGFub3RoZXIgZW50aXR5XFxyXFxuICBNT1ZFX0RFVFRBQ0g6IFwiZ2FtZWdyaWRodG1sOm1vdmU6ZGV0dGFjaFwiLCAvLyBsZWF2ZXMgb3ZlcmxhcHBpbmcgYW4gZW50aXR5XFxyXFxuICBNT1ZFX0xBTkQ6IFwiZ2FtZWdyaWRodG1sOm1vdmU6bGFuZFwiLCAvLyBtb3ZlIGZpbmlzaGVkXFxyXFxuXFxyXFxuICBMSU1JVDogXCJnYW1lZ3JpZGh0bWw6bGltaXRcIixcXHJcXG4gIExJTUlUX1g6IFwiZ2FtZWdyaWRodG1sOmxpbWl0OnhcIixcXHJcXG4gIExJTUlUX1k6IFwiZ2FtZWdyaWRodG1sOmxpbWl0OnlcIixcXHJcXG5cXHJcXG4gIFdSQVA6IFwiZ2FtZWdyaWRodG1sOndyYXBcIixcXHJcXG4gIFdSQVBfWDogXCJnYW1lZ3JpZGh0bWw6d3JhcDp4XCIsXFxyXFxuICBXUkFQX1k6IFwiZ2FtZWdyaWRodG1sOndyYXA6eVwiLFxcclxcbn07XFxyXFxuXFxyXFxuLyoqXFxyXFxuICogVGF4b25vbXk6XFxyXFxuICogWW91IGdldCBCTE9DS0VEIGJ5IEJhcnJpZXJzXFxyXFxuICogWW91IENPTExJREUgd2l0aCBJbnRlcmFjdGl2ZSBjZWxsc1xcclxcbiAqIFlvdSBERVRUQUNIIGZyb20gSW50ZXJhY3RpdmUgY2VsbHNcXHJcXG4gKiBZb3UgTEFORCBvbiBhbiBvcGVuIGNlbGxcXHJcXG4gKlxcclxcbiAqL1xcclxcblxcclxcbmNvbnN0IGNlbGxUeXBlRW51bSA9IHtcXHJcXG4gIE9QRU46IFwib3BlblwiLFxcclxcbiAgQkFSUklFUjogXCJiYXJyaWVyXCIsXFxyXFxuICBJTlRFUkFDVElWRTogXCJpbnRlcmFjdGl2ZVwiLFxcclxcbn07XFxyXFxuXFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vR2FtR3JpZC8uL3NyYy9lbnVtcy5qcz8nKX19LF9fd2VicGFja19tb2R1bGVfY2FjaGVfXz17fTtmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKGUpe3ZhciBuPV9fd2VicGFja19tb2R1bGVfY2FjaGVfX1tlXTtpZih2b2lkIDAhPT1uKXJldHVybiBuLmV4cG9ydHM7dmFyIHQ9X193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW2VdPXtpZDplLGV4cG9ydHM6e319O3JldHVybiBfX3dlYnBhY2tfbW9kdWxlc19fW2VdKHQsdC5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLHQuZXhwb3J0c31fX3dlYnBhY2tfcmVxdWlyZV9fLm49ZT0+e3ZhciBuPWUmJmUuX19lc01vZHVsZT8oKT0+ZS5kZWZhdWx0OigpPT5lO3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobix7YTpufSksbn0sX193ZWJwYWNrX3JlcXVpcmVfXy5kPShlLG4pPT57Zm9yKHZhciB0IGluIG4pX193ZWJwYWNrX3JlcXVpcmVfXy5vKG4sdCkmJiFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZSx0KSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6blt0XX0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89KGUsbik9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pLF9fd2VicGFja19yZXF1aXJlX18ucj1lPT57XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX07dmFyIF9fd2VicGFja19leHBvcnRzX189X193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2luZGV4LnRzXCIpO3JldHVybiBfX3dlYnBhY2tfZXhwb3J0c19ffSkoKX0pKTsiLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIkAtd2Via2l0LWtleWZyYW1lcyBnbG93IHtcXG4gIGZyb20ge1xcbiAgICBjb2xvcjogZ3JlZW47XFxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9XFxuICB0byB7XFxuICAgIGNvbG9yOiBibGFjaztcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9IH1cXG5cXG5Aa2V5ZnJhbWVzIGdsb3cge1xcbiAgZnJvbSB7XFxuICAgIGNvbG9yOiBncmVlbjtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IH1cXG4gIHRvIHtcXG4gICAgY29sb3I6IGJsYWNrO1xcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0gfVxcblxcbi5HYW1lR3JpZF9fc3RhZ2Uge1xcbiAgbWF4LXdpZHRoOiA0MDBweDsgfVxcbiAgLkdhbWVHcmlkX19zdGFnZS5hY3RpdmUge1xcbiAgICBvdXRsaW5lOiAycHggc29saWQgcmVkOyB9XFxuXFxuLkdhbWVHcmlkX190aWxlIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7IH1cXG4gIC5HYW1lR3JpZF9fdGlsZS5hY3RpdmUge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBhbGljZWJsdWU7XFxuICAgIG91dGxpbmU6IDNweCBzb2xpZCByZWQ7IH1cXG4gIC5HYW1lR3JpZF9fdGlsZS5mbGlwcGVkIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmx1ZTsgfVxcblxcbltkYXRhLWNlbGwtdHlwZT1cXFwiYmFycmllclxcXCJdIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IGNvcmFsOyB9XFxuXFxuW2RhdGEtY2VsbC10eXBlPVxcXCJpbnRlcmFjdGl2ZVxcXCJdIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IGdyZWVuOyB9XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vZGVtby9kZW1vLnNjc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRTtJQUNFLFlBQVk7SUFDWiwwQkFBMEIsRUFBQTtFQUU1QjtJQUNFLFlBQVk7SUFDWixxQkFBcUIsRUFBQSxFQUFBOztBQVB6QjtFQUNFO0lBQ0UsWUFBWTtJQUNaLDBCQUEwQixFQUFBO0VBRTVCO0lBQ0UsWUFBWTtJQUNaLHFCQUFxQixFQUFBLEVBQUE7O0FBS3ZCO0VBRUUsZ0JBQWdCLEVBQUE7RUFGakI7SUFJRyxzQkFBc0IsRUFBQTs7QUFJMUI7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQixFQUFBO0VBSHBCO0lBTUcsMkJBQTJCO0lBQzNCLHNCQUFzQixFQUFBO0VBUHpCO0lBV0csc0JBQXNCLEVBQUE7O0FBUjVCO0VBYUUsdUJBQXVCLEVBQUE7O0FBVnpCO0VBYUUsdUJBQXVCLEVBQUFcIixcInNvdXJjZXNDb250ZW50XCI6W1wiQGtleWZyYW1lcyBnbG93IHtcXHJcXG4gIGZyb20ge1xcclxcbiAgICBjb2xvcjogZ3JlZW47XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcclxcbiAgfVxcclxcbiAgdG8ge1xcclxcbiAgICBjb2xvcjogYmxhY2s7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXHJcXG4gIH1cXHJcXG59XFxyXFxuXFxyXFxuLkdhbWVHcmlkIHtcXHJcXG4gICZfX3N0YWdlIHtcXHJcXG4gICAgLy8gbWF4LWhlaWdodDogMjAwcHg7XFxyXFxuICAgIG1heC13aWR0aDogNDAwcHg7XFxyXFxuICAgICYuYWN0aXZlIHtcXHJcXG4gICAgICBvdXRsaW5lOiAycHggc29saWQgcmVkO1xcclxcbiAgICB9XFxyXFxuICB9XFxyXFxuXFxyXFxuICAmX190aWxlIHtcXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxuXFxyXFxuICAgICYuYWN0aXZlIHtcXHJcXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBhbGljZWJsdWU7XFxyXFxuICAgICAgb3V0bGluZTogM3B4IHNvbGlkIHJlZDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAmLmZsaXBwZWQge1xcclxcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsdWU7XFxyXFxuICAgIH1cXHJcXG4gIH1cXHJcXG59XFxyXFxuW2RhdGEtY2VsbC10eXBlPVxcXCJiYXJyaWVyXFxcIl0ge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogY29yYWw7XFxyXFxufVxcclxcbltkYXRhLWNlbGwtdHlwZT1cXFwiaW50ZXJhY3RpdmVcXFwiXSB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcXHJcXG59XFxyXFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKSB7XG4gIHZhciBfaXRlbSA9IF9zbGljZWRUb0FycmF5KGl0ZW0sIDQpLFxuICAgICAgY29udGVudCA9IF9pdGVtWzFdLFxuICAgICAgY3NzTWFwcGluZyA9IF9pdGVtWzNdO1xuXG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8IFwiXCIpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsImltcG9ydCBhcGkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgICAgICAgIGltcG9ydCBjb250ZW50IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1sxXS51c2VbMl0hLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZGVtby5zY3NzXCI7XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJleHBvcnQgY29uc3QgZ3JpZEV2ZW50c0VudW0gPSB7XHJcbiAgUkVOREVSRUQ6IFwiZ2FtZWdyaWRodG1sOmdyaWQ6cmVuZGVyZWRcIixcclxuICBTVEFURV9VUERBVEVEOiBcImdhbWVncmlkaHRtbDpzdGF0ZTp1cGRhdGVkXCIsXHJcblxyXG4gIE1PVkVfTEVGVDogXCJnYW1lZ3JpZGh0bWw6bW92ZTpsZWZ0XCIsXHJcbiAgTU9WRV9SSUdIVDogXCJnYW1lZ3JpZGh0bWw6bW92ZTpyaWdodFwiLFxyXG4gIE1PVkVfVVA6IFwiZ2FtZWdyaWRodG1sOm1vdmU6dXBcIixcclxuICBNT1ZFX0RPV046IFwiZ2FtZWdyaWRodG1sOm1vdmU6ZG93blwiLFxyXG5cclxuICBNT1ZFX0JMT0NLRUQ6IFwiZ2FtZWdyaWRobXRsOm1vdmU6YmxvY2tlZFwiLCAvLyBoaXRzIGEgd2FsbFxyXG4gIE1PVkVfQ09MTElTSU9OOiBcImdhbWVncmlkaHRtbDptb3ZlOmNvbGxpZGVcIiwgLy8gb3ZlcmxhcHMgYW5vdGhlciBlbnRpdHlcclxuICBNT1ZFX0RFVFRBQ0g6IFwiZ2FtZWdyaWRodG1sOm1vdmU6ZGV0dGFjaFwiLCAvLyBsZWF2ZXMgb3ZlcmxhcHBpbmcgYW4gZW50aXR5XHJcbiAgTU9WRV9MQU5EOiBcImdhbWVncmlkaHRtbDptb3ZlOmxhbmRcIiwgLy8gbW92ZSBmaW5pc2hlZFxyXG5cclxuICBMSU1JVDogXCJnYW1lZ3JpZGh0bWw6bGltaXRcIixcclxuICBMSU1JVF9YOiBcImdhbWVncmlkaHRtbDpsaW1pdDp4XCIsXHJcbiAgTElNSVRfWTogXCJnYW1lZ3JpZGh0bWw6bGltaXQ6eVwiLFxyXG5cclxuICBXUkFQOiBcImdhbWVncmlkaHRtbDp3cmFwXCIsXHJcbiAgV1JBUF9YOiBcImdhbWVncmlkaHRtbDp3cmFwOnhcIixcclxuICBXUkFQX1k6IFwiZ2FtZWdyaWRodG1sOndyYXA6eVwiLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRheG9ub215OlxyXG4gKiBZb3UgZ2V0IEJMT0NLRUQgYnkgQmFycmllcnNcclxuICogWW91IENPTExJREUgd2l0aCBJbnRlcmFjdGl2ZSBjZWxsc1xyXG4gKiBZb3UgREVUVEFDSCBmcm9tIEludGVyYWN0aXZlIGNlbGxzXHJcbiAqIFlvdSBMQU5EIG9uIGFuIG9wZW4gY2VsbFxyXG4gKlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBjZWxsVHlwZUVudW0gPSB7XHJcbiAgT1BFTjogXCJvcGVuXCIsXHJcbiAgQkFSUklFUjogXCJiYXJyaWVyXCIsXHJcbiAgSU5URVJBQ1RJVkU6IFwiaW50ZXJhY3RpdmVcIixcclxufTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCBcIi4vZGVtby5zY3NzXCI7XHJcblxyXG5pbXBvcnQgR2FtZUdyaWRIdG1sIGZyb20gXCIuLy4uL2Rpc3QvbWFpblwiO1xyXG5pbXBvcnQgeyBncmlkRXZlbnRzRW51bSB9IGZyb20gXCIuLy4uL3NyYy9lbnVtc1wiO1xyXG5cclxuLy8gaW1wb3J0IHsgZ3JpZEV2ZW50c0VudW0sIHRpbGVUeXBlRW51bSB9IGZyb20gXCIuLi9zcmMvb2xkL2VudW1zXCI7XHJcbmNvbnN0IHRpbGVUeXBlRW51bSA9IHtcclxuICBPUEVOOiBcIm9wZW5cIixcclxuICBJTlRFUkFDVElWRTogXCJpbnRlcmFjdGl2ZVwiLFxyXG4gIEJBUlJJRVI6IFwiYmFycmllclwiLFxyXG59O1xyXG5cclxuY29uc3QgbWF0cml4ID0gW1xyXG4gIFtcclxuICAgIHtcclxuICAgICAgdHlwZTogdGlsZVR5cGVFbnVtLk9QRU4sXHJcbiAgICAgIGNlbGxBdHRyaWJ1dGVzOiBbW1wiZGF0YS1idXR0XCIsIFwic2F1Y2VcIl1dLFxyXG4gICAgICByZW5kZXJGdW5jdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgeyB0eXBlOiB0aWxlVHlwZUVudW0uT1BFTiB9LFxyXG4gICAgeyB0eXBlOiB0aWxlVHlwZUVudW0uT1BFTiB9LFxyXG4gICAge1xyXG4gICAgICB0eXBlOiB0aWxlVHlwZUVudW0uSU5URVJBQ1RJVkUsXHJcbiAgICAgIGNlbGxBdHRyaWJ1dGVzOiBbW1wiZGF0YS1jZWxsLXR5cGVcIiwgXCJpbnRlcmFjdGl2ZVwiXV0sXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgW1xyXG4gICAgeyB0eXBlOiB0aWxlVHlwZUVudW0uT1BFTiB9LFxyXG4gICAgeyB0eXBlOiB0aWxlVHlwZUVudW0uT1BFTiB9LFxyXG4gICAgeyB0eXBlOiB0aWxlVHlwZUVudW0uT1BFTiB9LFxyXG4gICAge1xyXG4gICAgICB0eXBlOiB0aWxlVHlwZUVudW0uQkFSUklFUixcclxuICAgICAgY2VsbEF0dHJpYnV0ZXM6IFtbXCJkYXRhLWNlbGwtdHlwZVwiLCBcImJhcnJpZXJcIl1dLFxyXG4gICAgfSxcclxuICBdLFxyXG4gIFtcclxuICAgIHsgdHlwZTogdGlsZVR5cGVFbnVtLk9QRU4gfSxcclxuICAgIHsgdHlwZTogdGlsZVR5cGVFbnVtLk9QRU4gfSxcclxuICAgIHsgdHlwZTogdGlsZVR5cGVFbnVtLk9QRU4gfSxcclxuICAgIHtcclxuICAgICAgdHlwZTogdGlsZVR5cGVFbnVtLkJBUlJJRVIsXHJcbiAgICAgIGNlbGxBdHRyaWJ1dGVzOiBbW1wiZGF0YS1jZWxsLXR5cGVcIiwgXCJiYXJyaWVyXCJdXSxcclxuICAgIH0sXHJcbiAgICB7IHR5cGU6IHRpbGVUeXBlRW51bS5PUEVOIH0sXHJcbiAgICB7IHR5cGU6IHRpbGVUeXBlRW51bS5PUEVOIH0sXHJcbiAgXSxcclxuICBbXHJcbiAgICB7IHR5cGU6IHRpbGVUeXBlRW51bS5PUEVOIH0sXHJcbiAgICB7IHR5cGU6IHRpbGVUeXBlRW51bS5PUEVOIH0sXHJcbiAgICB7XHJcbiAgICAgIHR5cGU6IHRpbGVUeXBlRW51bS5CQVJSSUVSLFxyXG4gICAgICBjZWxsQXR0cmlidXRlczogW1tcImRhdGEtY2VsbC10eXBlXCIsIFwiYmFycmllclwiXV0sXHJcbiAgICB9LFxyXG4gICAgeyB0eXBlOiB0aWxlVHlwZUVudW0uT1BFTiB9LFxyXG4gIF0sXHJcbl07XHJcbmNvbnN0ICRjbGlja2FibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yZWY9XCJDaGVja2JveC5jbGlja2FibGVcIl0nKTtcclxuY29uc3QgJGluZmluaXRlX3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yZWY9XCJDaGVja2JveC5pbmZpbml0ZV94XCJdJyk7XHJcbmNvbnN0ICRpbmZpbml0ZV95ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcmVmPVwiQ2hlY2tib3guaW5maW5pdGVfeVwiXScpO1xyXG5jb25zdCAkYXJyb3dfY29udHJvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICdbZGF0YS1yZWY9XCJDaGVja2JveC5hcnJvd19jb250cm9sc1wiXSdcclxuKTtcclxuY29uc3QgJHdhc2RfY29udHJvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICdbZGF0YS1yZWY9XCJDaGVja2JveC53YXNkX2NvbnRyb2xzXCJdJ1xyXG4pO1xyXG5cclxuY29uc3QgZyA9IG5ldyBHYW1lR3JpZEh0bWwoXCIjYXBwXCIsIHtcclxuICBtYXRyaXgsXHJcbiAgb3B0aW9uczoge1xyXG4gICAgaW5maW5pdGVfeTogJGluZmluaXRlX3kuY2hlY2tlZCxcclxuICAgIGluZmluaXRlX3g6ICRpbmZpbml0ZV94LmNoZWNrZWQsXHJcbiAgICBjbGlja2FibGU6ICRjbGlja2FibGUuY2hlY2tlZCxcclxuICAgIGFycm93X2NvbnRyb2xzOiAkYXJyb3dfY29udHJvbHMuY2hlY2tlZCxcclxuICAgIHdhc2RfY29udHJvbHM6ICR3YXNkX2NvbnRyb2xzLmNoZWNrZWQsXHJcbiAgICBjYWxsYmFja3M6IHtcclxuICAgICAgTElNSVQ6IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjYWxsYmFjayBmb3IgTElNSVRcIiwgeCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIFdSQVBfWTogZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNhbGxiYWNrIFdSQVBfWVwiLCB4KTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSxcclxufSk7XHJcblxyXG53aW5kb3cuZ2FtZWdyaWQgPSBnO1xyXG5cclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJlZj1cIkZvcm0uc2V0dGluZ3NcIl0nKTtcclxuY29uc3QgY2hlY2tib3hlcyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSk7XHJcblxyXG5jaGVja2JveGVzLmZvckVhY2goKGNiKSA9PiB7XHJcbiAgY2IuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICBnLnNldE9wdGlvbnMoe1xyXG4gICAgICBpbmZpbml0ZV95OiAkaW5maW5pdGVfeS5jaGVja2VkLFxyXG4gICAgICBpbmZpbml0ZV94OiAkaW5maW5pdGVfeC5jaGVja2VkLFxyXG4gICAgICBjbGlja2FibGU6ICRjbGlja2FibGUuY2hlY2tlZCxcclxuICAgICAgYXJyb3dfY29udHJvbHM6ICRhcnJvd19jb250cm9scy5jaGVja2VkLFxyXG4gICAgICB3YXNkX2NvbnRyb2xzOiAkd2FzZF9jb250cm9scy5jaGVja2VkLFxyXG4gICAgfSk7XHJcbiAgICBnLmRlc3Ryb3koKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXBwXCIpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgZy5yZW5kZXIoKTtcclxuICAgIGcuaW5pdCgpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbk9iamVjdC5rZXlzKGdyaWRFdmVudHNFbnVtKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihncmlkRXZlbnRzRW51bVtrZXldLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGNvbnNvbGUubG9nKGV2ZW50LnR5cGUsIFwiIC0tLS0gXCIsIGV2ZW50LmRldGFpbCk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2V2ZW50XCIpLnRleHRDb250ZW50ID0gYCR7ZXZlbnQudHlwZX1cclxuICAgICR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNldmVudFwiKS50ZXh0Q29udGVudH1gO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmcucmVuZGVyKCk7XHJcblxyXG5nLmluaXQoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==